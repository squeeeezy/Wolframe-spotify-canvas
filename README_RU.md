# ü¶Ä wolframe-spotify-canvas

[![Crates.io](https://img.shields.io/crates/v/wolframe-spotify-canvas.svg)](https://crates.io/crates/wolframe-spotify-canvas)
[![Documentation](https://docs.rs/wolframe-spotify-canvas/badge.svg)](https://docs.rs/wolframe-spotify-canvas)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

> **–†–∞–±–æ—á–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Spotify Canvas (–≤–∏–¥–µ–æ-–ª—É–ø–æ–≤) –≤ 2026 –≥–æ–¥—É.**

–≠—Ç–∞ Rust-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Ä–µ–≤–µ—Ä—Å-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ **Spotify GraphQL Pathfinder API**, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –≤–µ–±-–ø–ª–µ–µ—Ä–æ–º. –û–Ω–∞ –∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –∏ –Ω–µ—Ä–∞–±–æ—á–∏–µ REST API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (`canvaz-cache`).

[üá¨üáß Read in English / –ß–∏—Ç–∞—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º](README.md)

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

-   **Pathfinder API:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `api-partner.spotify.com/pathfinder/v2` —Å Persisted Queries.
-   **–ê–≤—Ç–æ–Ω–æ–º–Ω—ã–π Client Token:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç `client-token`, —ç–º—É–ª–∏—Ä—É—è —Å–µ—Å—Å–∏—é —Ä–µ–∞–ª—å–Ω–æ–≥–æ Web Player'–∞.
-   **–ì–∏–±–∫–æ—Å—Ç—å:** –°–æ–∑–¥–∞–Ω–∞ —Å —Ä–∞—Å—á–µ—Ç–æ–º –Ω–∞ –±—É–¥—É—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ö–µ—à GraphQL –∑–∞–ø—Ä–æ—Å–∞ –∏ –∏–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥, –µ—Å–ª–∏ Spotify —Ä–µ—à–∏—Ç –∏—Ö —Å–º–µ–Ω–∏—Ç—å.
-   **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –°—Ç—Ä–æ–≥–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏, —Ç–æ–∫–µ–Ω–æ–≤ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π API.

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `Cargo.toml`:

```toml
[dependencies]
wolframe-spotify-canvas = "0.1.0"
tokio = { version = "1", features = ["full", "macros"] }
```

## ‚ö° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```rust
use wolframe_spotify_canvas::{CanvasClient, Result};

#[tokio::main]
async fn main() -> Result<()> {
    // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–ª–∏–µ–Ω—Ç (client-token —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    let mut client = CanvasClient::new();
    
    // 2. –í–∞–º –Ω—É–∂–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π Spotify Access Token (Bearer)
    // –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ SP_DC (librespot) –∏–ª–∏ —á–µ—Ä–µ–∑ OAuth.
    let access_token = "–í–ê–®_ACCESS_TOKEN";

    // 3. –ü–æ–ª—É—á–∞–µ–º Canvas
    let track_uri = "spotify:track:4cOdK2wGLETKBW3PvgPWqT"; // Glimpse of Us
    
    match client.get_canvas(track_uri, access_token).await {
        Ok(canvas) => {
            println!("üé• Canvas –Ω–∞–π–¥–µ–Ω!");
            println!("MP4 URL: {}", canvas.mp4_url);
        }
        Err(e) => {
            eprintln!("‚ùå –û—à–∏–±–∫–∞: {}", e);
        }
    }

    Ok(())
}
```

–°–º–æ—Ç—Ä–∏—Ç–µ `examples/simple.rs` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞.

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ (Reverse Engineering)

Spotify –æ—Ç–∫–∞–∑–∞–ª—Å—è –æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ REST API –≤ –ø–æ–ª—å–∑—É —Å–ª–æ–∂–Ω–æ–≥–æ GraphQL. –≠—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ–ø–∞—Å—Ç—å –º–µ–∂–¥—É –Ω–∏–º–∏.

### "–õ–æ–≤—É—à–∫–∞ –•—ç—à–∞" (Hash Trap)
GraphQL API Spotify –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç "—Å—ã—Ä—ã–µ" –∑–∞–ø—Ä–æ—Å—ã. –û–Ω —Ç—Ä–µ–±—É–µ—Ç **Persisted Queries** ‚Äî –æ—Ç–ø—Ä–∞–≤–∫—É SHA-256 —Ö–µ—à–∞ –∑–∞–ø—Ä–æ—Å–∞.
*   **–•–µ—à –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `575138ab27cd5c1b3e54da54d0a7cc8d85485402de26340c2145f0f6bb5e7a9f` (–ó–∞—à–∏—Ç –≤ –ª–∏–±—É, –Ω–æ –º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥).
*   **Operation Name:** `canvas` (–í–∞–∂–Ω–æ: —Ä–∞–Ω—å—à–µ –≤—Å–µ –¥—É–º–∞–ª–∏, —á—Ç–æ —ç—Ç–æ `getCanvas`, –Ω–æ —ç—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ 400 –æ—à–∏–±–∫—É).
*   **–ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:** `trackUri` (–†–∞–Ω—å—à–µ –±—ã–ª–æ `uri`).

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
–ü—Ä–æ—Å—Ç–æ–≥–æ access —Ç–æ–∫–µ–Ω–∞ **–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ**. API —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `client-token`.
*   –≠—Ç–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —ç–º—É–ª–∏—Ä—É–µ—Ç —Ñ–ª–æ—É —Å–∞–π—Ç–∞ `clienttoken.spotify.com`, –≥–µ–Ω–µ—Ä–∏—Ä—É—è —Å–ª—É—á–∞–π–Ω—ã–π `device_id` –∏ –æ–±–º–µ–Ω–∏–≤–∞—è –µ–≥–æ –Ω–∞ –≤–∞–ª–∏–¥–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω—ã–π `client-token`.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç (Contributing)

–ü—É–ª-—Ä–µ–∫–≤–µ—Å—Ç—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –û—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ Spotify –æ–±–Ω–æ–≤–∏—Ç —Ö–µ—à API ‚Äî PR —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º `DEFAULT_CANVAS_HASH` —Å–ø–∞—Å–µ—Ç —Ç—ã—Å—è—á–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License. –°–º. [LICENSE](LICENSE).

---

*–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –æ—Ç –∫–æ–º–∞–Ω–¥—ã Wolframe.*
